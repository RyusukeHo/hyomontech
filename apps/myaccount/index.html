<!DOCTYPE html>
<html lang="ja">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="apple-touch-icon" type="image/png" href="apple-touch-icon-180x180.png">
    <link rel="icon" href="favicon.ico">

    <title>マイアカウント</title>
</head>

<body>
    <div class="container"><iframe src="about:blank" frameborder="0" id="page"></iframe></div>

    <style>
        * {
            margin: 0;
            padding: 0;
            overflow: hidden;
            height: 100vh;
        }

        iframe {
            border: none;
            width: 100%;
            height: 100%;
        }
    </style>
    <script>
        let appPath = "https://script.google.com/macros/s/AKfycbxw3Efxq_8dkqBUDw3-_pJ2tm2wKDw_UdqKLakGpPdJLGUQZj9RZSK_7t6gRGF0hWorlg/exec";
        let frame = document.getElementById("page");
        function getCookie(cookieName) {
            let name = cookieName + "=";
            let decodedCookie = decodeURIComponent(document.cookie);
            let cookieArray = decodedCookie.split(';');

            for (let i = 0; i < cookieArray.length; i++) {
                let cookie = cookieArray[i].trim();
                if (cookie.indexOf(name) == 0) {
                    return cookie.substring(name.length, cookie.length);
                }
            }

            // 指定されたクッキーが見つからない場合「null」を返す
            return null;
        }
        checkLogin();
        async function checkLogin() {
            if (getCookie("id") == null) {
                frame.src = "https://ryusukeho.github.io/hyomontech/login/?redirect=reload";
            } else {
                frame.src = appPath + "?id=" + encodeURIComponent(getCookie("id")) + "&pwd=" + encodeURIComponent(getCookie("pwd"));
            }
        }

    </script>
</body>

</html>